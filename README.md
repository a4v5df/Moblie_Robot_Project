# 🤖 Origami Tendon-Driven Soft Robot

**종이접기(Origami) 구조 기반의 텐던 구동 소프트 로봇 제어 시스템**입니다.
웹 브라우저를 통해 3D 시뮬레이션과 실제 로봇을 동시에 제어할 수 있으며, 컴퓨터 비전(CV)을 이용한 핸드 트래킹을 지원합니다.

## ✨ 주요 기능

* **Hand Tracking**: 웹캠으로 손가락의 굽힘을 인식하여 와이어 장력을 제어합니다.
* **3D Simulation**: p5.js를 이용해 Kresling 패턴 구조의 변형을 실시간으로 시각화합니다.
* **Web Serial API**: 별도의 서버 없이 웹 페이지에서 ESP32와 직접 통신합니다.
* **P-Control**: 목표 장력에 따른 비례 제어로 모터의 부드러운 움직임을 구현했습니다.

## 📂 파일 구조

| 파일명 | 설명 |
| :--- | :--- |
| `index.html` | 메인 UI 및 라이브러리 로드 |
| `origami_mk2.js` | 3D 시뮬레이션 및 모터 제어 알고리즘 (P-Control) |
| `cv_control.js` | ml5.js 기반 핸드 제스처 인식 및 장력 매핑 |
| `serial.js` | Web Serial API 통신 핸들러 |
| `origami_robot_esp32.ino` | ESP32 아두이노 펌웨어 소스 |

## 🛠️ 하드웨어 설정 (ESP32)

**서보모터 핀맵**:

| 모션 | 손가락 | GPIO Pin |
| :--- | :--- | :---: |
| **Up** (상) | 검지 | **13** |
| **Down** (하) | 중지 | **12** |
| **Left** (좌) | 약지 | **14** |
| **Right** (우) | 소지 | **27** |

## 🚀 시작하기

1. **펌웨어 업로드**: `origami_robot_esp32.ino` 파일을 ESP32 보드에 업로드합니다.
2. **로컬 서버 실행**: VS Code의 **Live Server** 등을 사용하여 `index.html`을 엽니다.
   > *웹캠 및 시리얼 통신 권한을 위해 `localhost` 또는 `HTTPS` 환경이 필수입니다.*
3. **연결**: 웹 화면 좌측 상단의 `Connect ESP32` 버튼을 클릭하고 포트를 연결합니다.

## 🎮 조작 방법

### 1. 핸드 트래킹 모드
웹캠에 손바닥을 보여주면 자동으로 인식됩니다. 각 손가락을 구부려 와이어를 당길 수 있습니다.

### 2. 키보드 제어
| Key | 동작 | Key | 동작 |
| :---: | :--- | :---: | :--- |
| **Q / A** | Up (당김/풀기) | **W / S** | Down (당김/풀기) |
| **E / D** | Left (당김/풀기) | **R / F** | Right (당김/풀기) |

## ⚙️ 설정

모터가 정지 신호에도 움직이거나 소리가 난다면 `origami_mk2.js` 파일에서 정지값을 보정하세요.

```javascript
// origami_mk2.js
const SERVO_STOP = 93; // 90~95 사이 값으로 미세 조정
const SPEED_GAIN = 800; // 모터 반응 민감도